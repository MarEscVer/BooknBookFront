<app-sidenav-despacho></app-sidenav-despacho>

<!-- METRICAS -->
<div class="container-fluid container-metricas mt-4 my-2 mx-0">
    <div class="row p-3 d-flex flex-lg-row justify-content-around">
        <div class="col-lg-2 d-flex flex-column justify-content-center align-items-center">
            <h5>Desde que te uniste ...</h5>
        </div>
        <div class="col-lg-2 d-flex flex-column justify-content-center align-items-center">
            <h5>PÁGINAS LEÍDAS</h5>
            <h2>{{(datosEstadisticaGenero?.paginasLeidas ? datosEstadisticaGenero?.paginasLeidas : '0000' )}}</h2>
        </div>
        <div class="col-lg-2 d-flex flex-column justify-content-center align-items-center">
            <h5>LIBROS LEÍDOS</h5>
            <h2>{{(datosEstadisticaGenero?.librosLeidos ? datosEstadisticaGenero?.librosLeidos : '0000' )}}</h2>
        </div>
        <div class="col-lg-2 d-flex flex-column justify-content-center align-items-center">
            <h5>RESEÑAS</h5>
            <h2>{{(datosEstadisticaGenero?.valoraciones ? datosEstadisticaGenero?.valoraciones : '0000' )}}</h2>
        </div>
        <div class="col-lg-2 d-flex flex-column justify-content-center align-items-center">
            <h5>GÉNERO FAVORITO</h5>
            <h2>{{(datosEstadisticaGenero?.genero ? datosEstadisticaGenero?.genero : '...' )}}</h2>
        </div>
    </div>
</div>

<!-- TODO ESTADISTICAS -->
<div class="d-flex flex-row flex-wrap justify-content-around mt-4 pb-4">
    <canvas id="EstadoLecturas" width="400" height="400">{{ chartEstadoLecturas }}</canvas>
    <canvas id="LecturasPorGenero" width="400" height="400">{{ chartLecturasPorGenero }}</canvas>
</div>
<div class="container mt-4">
    <div class="row">
        <!-- Selector de Año -->
        <div class="col-lg-auto mb-4">
            <mat-form-field appearance="fill">
                <mat-label>Año</mat-label>
                <mat-select [(value)]="selectedYear" (selectionChange)="onYearChange($event.value)">
                    <mat-option *ngFor="let year of availableYears" [value]="year">{{ year }}</mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <!-- Gráfico -->
        <div class="col-lg-9 mx-auto">
            <div id="chart" *ngIf="chartOptions">
                <apx-chart [series]="chartOptions.series" [chart]="chartOptions.chart"
                    [dataLabels]="chartOptions.dataLabels" [plotOptions]="chartOptions.plotOptions"
                    [tooltip]="chartOptions.tooltip"></apx-chart>
            </div>
        </div>
    </div>
</div>
